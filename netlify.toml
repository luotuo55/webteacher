[build]
  publish = "dist"
  command = "npm run build"

[build.environment]
  NPM_FLAGS = "--legacy-peer-deps"

# Grade System Main Pages
[[redirects]]
  from = "/kindergarten"
  to = "/index.html"
  status = 200

[[redirects]]
  from = "/grade-1"
  to = "/index.html"
  status = 200

[[redirects]]
  from = "/grade-2"
  to = "/index.html"
  status = 200

[[redirects]]
  from = "/grade-3"
  to = "/index.html"
  status = 200

[[redirects]]
  from = "/grade-4"
  to = "/index.html"
  status = 200

[[redirects]]
  from = "/grade-5"
  to = "/index.html"
  status = 200

# Elegant Lesson URLs (Mapped to Grade System)
[[redirects]]
  from = "/grade-1/making-ten-9"
  to = "/lessons/grade-1/making-ten-9/index.html"
  status = 200

[[redirects]]
  from = "/grade-1/adding-876"
  to = "/lessons/grade-1/adding-876/index.html"
  status = 200

[[redirects]]
  from = "/grade-1/make-ten-assistant"
  to = "/lessons/grade-1/make-ten-assistant/index.html"
  status = 200

# Legacy/Asset support for lessons
[[redirects]]
  from = "/lessons/grade-1/making-ten-9/*"
  to = "/lessons/grade-1/making-ten-9/:splat"
  status = 200

[[redirects]]
  from = "/lessons/grade-1/adding-876/*"
  to = "/lessons/grade-1/adding-876/:splat"
  status = 200

[[redirects]]
  from = "/lessons/grade-1/make-ten-assistant/*"
  to = "/lessons/grade-1/make-ten-assistant/:splat"
  status = 200
